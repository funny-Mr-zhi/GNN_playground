# 依据二八法则快速过一遍图论基础

> 《图论导引》内容太多了，虽然有助于理解将现实问题抽象为图，并通过一些图特征的计算解决现实问题。但是内容过多， 仅第一章第一部分就耗费了一个小时学习。不宜前期耗费太多精力在图论上，后续可以回过头来看。

> 这里先采用二八法则重点学习和GNN相关的部分

结合AI推荐和前期规划定位重点：
* 图的表示方法（邻接矩阵， 邻接表）
* 遍历（BFS， DFS）
* 算法（最短路径，连通分量， PageRank思想）
* 图的重要度量指标

## 图的表示方法
> 在图论中，图的表示是将抽象的图结构转化为计算机可存储和处理的形式。不同的表示方法适用于不同的场景，其效率与图的稀疏程度、常用操作密切相关

### 邻接矩阵

假设图G有n个顶点，用邻接矩阵A表示图的拓扑关系

其中$a_{ij} = 1$表示从i节点到j节点有边，无边则为0
* 无向图的邻接矩阵是对称的
* 加权图的$a_{ij}$可以为任意值

* 优点
    * 直观、简单易懂
    * 判断两节点是否相邻的时间复杂度为O(1)
    * 适合稠密图，空间利用率高
* 缺点
    * 空间复杂度为$O(n^2)$，对稀疏图极不友好
    * 遍历顶点$V_i$的所有邻居时，需要扫描i行所有n个元素，时间复杂度为O(n)

### 邻接表

邻接表是一种链表存储结构，通过“顶点表”和“边表”存储图，更适合稀疏图

* 顶点表为一个数组或链表，长度为节点个数，每个元素对应一个$V_i$，存储顶点信息及指向其边表的指针
* 边表为一个链表（或动态数组），存储所有与$V_i$相邻的顶点。（需要加权时存储(v_j, w)）

* 优点
    * 空间复杂度为O(n+m)，对稀疏矩阵极其高效
    * 遍历V_i的所有邻居时，只需遍历其边表，复杂度为O(degree(V_i))
* 缺点
    * 判断两节点是否相邻时，需要遍历V_i的边表，复杂度为O(degree(V_i))
    * 实现稍微复杂

### 其它重要方法
* 关联矩阵：一个nxm的矩阵M（n为顶点数，m为边数）。M[i][j] = 1若边j的端点为顶点i。有向图可以用1, -1来区分首尾节点
    * 适用场景：分析顶点与边的关联关系(如bipartition判定)，但空间复杂度O(mn)较高，较少用于大规模图
* 邻接多重表和十字链表，都是在邻接表的基础上增加边表节点存储的信息，以适应不同的操作需求。

> 不同的图表示方法本质上是对图中节点与边关联关系的抽象表示。最简单直接的就是邻接矩阵表示，后续针对不同的边数和操作方法衍生出不同的图表示方式，每种方式都是针对特定图类型或操作类型设计的。

对比
表示方式|场景|核心原因
--|--|--
邻接矩阵|稠密图($边数\approx n^2$)|空间利用率高，查询快
邻接矩阵| 频繁判断边是否存在 | O(1)时间复杂度
邻接表|稀疏图($边数\ll n^2$)| 稀疏图存储空间高效
邻接表|频繁遍历邻接节点| 仅需遍历实际相邻的节点
邻接多重表| 无向图频繁删除边| 避免双重修改
十字链表| 有向图需高效处理入边、出边| 入边、出边可直接遍历
关联矩阵|分析顶点与边的关联关系|直观体现顶点-边的从属关系

> TODO: DGL或PYG采用什么存储格式，在进行消息传递的时候具体是如何计算的，有没有针对消息传递的并行优化

#### 图的表示扩展：PYG与DGL
##### PYG：稀疏邻接表 + COO格式
PYG使用`COO(Coordinate Format)`稀疏矩阵表示图的邻接关系，即通过`edge_indnex`张量存储边的起点和终点索引
```
edge_idnex = torch.tensor([
    [0, 1, 1, 2, 3], #起点索引
    [1, 0, 2, 1, 0]  #终点索引
], dtype=torch.long)
```

选择的原因：
* 灵活性高：COO格式直接存储非零元素的坐标，无需现实构建完整的邻接矩阵，适合稀疏图
* 与pytorch深度集成：`edge_index`可以直接作为张量参与计算，便于利用Pytorch的自动微分和GPU加速
* 支持异构图：通过`edge_types`参数可以轻松扩展到异质图

##### DGL：块稀疏矩阵 + CSR/CSC格式
DGL使用`CSR(Compressed Sparse Row)`或`CSC(Compressed Sparse Column)`格式存储邻接矩阵
```
src = torch.tensor([0, 1, 1, 2, 3])
dst = torch.tensor([1, 0, 2, 1, 0])
g = dgl.graph((srg, dst))
```
选择原因：
* 高效的矩阵运算，CSR/CSC格式在稀疏矩阵乘法、聚合操作（如消息传递）上有更高效的计算效率，适合大规模图的并行处理。
* 内置优化：DGL针对CSR/CSC格式设计了大量底层优化，加速消息传递
* 多后端支持：DGL支持Pytorch、MXNet、TensorFlow等多种深度学习框架，CSR/CSC格式便于统一不同后端的计算逻辑

> 针对PYG和DGL图表示方法和加速原理的深入解析，由于涉及到多个领域知识，放在[知识图谱-交叉理解]()里面了，这里给出仓库地址

## 遍历

## 算法

## 图的重要度量指标



